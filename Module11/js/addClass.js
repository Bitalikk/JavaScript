'use strict';
// ========================= Task 01 =======================
/*
* –ö pen —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω Handlebars.
* –ò—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –∏ –º–µ—Ç–æ–¥ Handlebars.compile
* 
* –°–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ —É–∫–∞–∑–∞–Ω–æ–≥–æ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ HTML.
* –û—Ç—Ä–µ–Ω–¥–µ—Ä–∏ —Å–ø–∏—Å–æ–∫ –≤ DOM –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ products.
*/
// const products = [
//   { name: "Apples", quantity: 50 },
//   { name: "Grapes", quantity: 44 },
//   { name: "Cheese", quantity: 128 },
//   { name: "Milk", quantity: 93 }
// ];

// const priceList = document.querySelector('#price-list').innerHTML.trim();
// const productList = document.querySelector('.products');

// const template = Handlebars.compile(priceList);
// const markup = template(products);

// productList.insertAdjacentHTML('beforeend', markup);


// =================================== Task 02 =============================


/*
 * –ö pen —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω Handlebars.
 * –ò—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –∏ –º–µ—Ç–æ–¥ Handlebars.compile
 * 
 * –°–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω –ø–æ—Å—Ç–∞ —É–∫–∞–∑–∞–Ω–æ–≥–æ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ HTML.
 * –û—Ç—Ä–µ–Ω–¥–µ—Ä–∏ —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ –≤ DOM –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ posts.
 * 
 * –ï—Å–ª–∏ –≤ –æ–±—ä–µ–∫—Ç–µ –ø–æ–ª–µ favourite=true, –≤ –ø–æ—Å—Ç–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 
 * —Ä–∞–∑–º–µ—Ç–∫–∞ –∏–∫–æ–Ω–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ,
 * —Ä–∞–∑–º–µ—Ç–∫–∏ –∏–∫–æ–Ω–∫–∏ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ.
*/

// const posts = [
//   {
//     title: "Phasellus volutpat metus",
//     text:
//       "Vestibulum purus quam, scelerisque ut, mollis sed, nonummy id, metus. Pellentesque egestas, neque sit amet convallis pulvinar, justo nulla eleifend augue, ac auctor orci leo non est. Ut leo.",
//     favourite: true
//   },
//   {
//     title: "Nulla consequat massa",
//     text:
//       "Maecenas ullamcorper, dui et placerat feugiat, eros pede varius nisi, condimentum viverra felis nunc et lorem. Etiam sollicitudin, ipsum eu pulvinar rutrum, tellus ipsum laoreet sapien, quis venenatis ante odio sit amet eros. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.",
//     favourite: false
//   },
//   {
//     title: "In enim justo",
//     text:
//       "Curabitur ligula sapien, tincidunt non, euismod vitae, posuere imperdiet, leo. Suspendisse eu ligula. Praesent metus tellus, elementum eu, semper a, adipiscing nec, purus.",
//     favourite: true
//   },
//   {
//     title: "Vestibulum ante ipsum",
//     text:
//       "Vestibulum suscipit nulla quis orci. Praesent venenatis metus at tortor pulvinar varius. Nulla sit amet est. Suspendisse eu ligula sollicitudin, ipsum eu pulvinar rutrum, tellus ipsum laoreet sapien.",
//     favourite: false
//   }
// ];
// const postCard = document.querySelector('#postCard').innerHTML.trim();
// const par = document.querySelector('.posts');

// const template = Handlebars.compile(postCard);
// const markup = template(posts);
// par.innerHTML = markup;


// ========================== Task 03 ================================================


/* 
  –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é validate –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—è —Ñ–æ—Ä–º—ã 
  firstname –∏ lastname –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ 
  –æ–±—å–µ–∫—Ç–∞ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ 'first name' –∏ 'last name'.
  
  –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ñ–æ—Ä–º–∞—Ç –æ–±—ä–µ–∫—Ç–∞: –≤ —Å–≤–æ–π—Å—Ç–≤–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –±—É–ª—å-—Ñ–ª–∞–≥ 
  —É–≤–µ–¥–æ–º–ª—è—é—â–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è.
  {
    'first name': true –∏–ª–∏ false,
    'last name': true –∏–ª–∏ false,
  }
  
  –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
  1)–ò–º—è. –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ 2-—Ö —Å–ª–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏
  –∏–ª–∏ –¥–µ—Ñ–∏—Å–æ–º. –°–ª–æ–≤–∞ –¥–æ–ª–∂–Ω—ã —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –±—É–∫–≤.
  
  2)–§–∞–º–∏–ª–∏—è. –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ 2-—Ö —Å–ª–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏
  –∏–ª–∏ –¥–µ—Ñ–∏—Å–æ–º. –°–ª–æ–≤–∞ –¥–æ–ª–∂–Ω—ã —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –±—É–∫–≤.
  
  –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É submit –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞.
  –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, –æ–±—ä–µ–∫—Ç, –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å.
*/

// const form = document.getElementById("form");
// const pattern = /^([–∞-—è]{4,10}(?:( ?|-?)[–∞-—è]{2,10}$|$))|^([a-z]{4,10}(?:( ?|-?)[a-z]{2,10}$|$))/i;

// form.addEventListener("submit", validate);

// function validate(evt) {
//   evt.preventDefault();
//   const inputs = Array.from(form.querySelectorAll('input'));

//   const results = inputs.reduce((acc, { id, value }) => {
//     acc[id] = pattern.test(value);
//     return acc;
//   }, {});
  
//   const valid = Object.values(results).every(el => el);
//   console.log({
//     valid,
//     results,
//   });
// }






//================================== Homework ==============================================

/*
  –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É —Ñ–∏–ª—å—Ç—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ —Å–ø–∏—Å–æ–∫ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.
  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤.
  
  –ï—Å—Ç—å –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ (–¥–∞–ª—å—à–µ –≤ –∑–∞–¥–∞–Ω–∏–∏), –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø–∏—Å—ã–≤–∞–µ—Ç 
  –Ω–æ—É—Ç–±—É–∫ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏.
  
  –ü–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ –ø–æ –∫–æ—Ç–æ—Ä—ã–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é: size, color, release_date.
  –ü–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ: name, img, descr, color, price, release_date.
    
  –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –µ—Å—Ç—å —Ñ–æ—Ä–º–∞ —Å 3-–º—è —Å–µ–∫—Ü–∏—è–º–∏, —Å–æ—Å—Ç–æ—è—â–∏–º–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –≥—Ä—É–ø–ø—ã 
  —á–µ–∫–±–æ–∫—Å–æ–≤ (—Ä–∞–∑–º–µ—Ç–∫–∞ –¥–∞–ª—å—à–µ –≤ –∑–∞–¥–∞–Ω–∏–∏). –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª 
  –∫–∞–∫–∏–µ –ª–∏–±–æ —á–µ–∫–±–æ–∫—Å—ã –∏ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É Filter, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —á–µ–∫–±–æ–∫—Å–æ–≤ –ø–æ –≥—Ä—É–ø–ø–∞–º. 
  
  üîî –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–æ—Å—Ç–∞–≤—å—Ç–µ –æ–±—ä–µ–∫—Ç —Ñ–æ—Ä–º–∞—Ç–∞
      const filter = { size: [], color: [], release_date: [] }
    
  –ü–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Ç–æ–ª—å–∫–æ —Ç–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ö–æ–¥—è—Ç 
  –ø–æ–¥ –≤—ã–±—Ä–∞–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤.
  
  üîî –ö–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã, —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –æ—á–∏—â–∞–µ—Ç—Å—è, 
      –ø–æ—Å–ª–µ —á–µ–≥–æ –≤ –Ω–µ–º —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–∫—É—â–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º —Ñ–∏–ª—å—Ç—Ä–∞.
*/



const laptops = [
  {
    size: 13,
    color: 'white',
    price: 28000,
    release_date: 2015,
    name: 'Macbook Air White 13"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 13,
    color: 'gray',
    price: 32000,
    release_date: 2016,
    name: 'Macbook Air Gray 13"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 13,
    color: 'black',
    price: 35000,
    release_date: 2017,
    name: 'Macbook Air Black 13"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 15,
    color: 'white',
    price: 45000,
    release_date: 2015,
    name: 'Macbook Air White 15"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 15,
    color: 'gray',
    price: 55000,
    release_date: 2016,
    name: 'Macbook Pro Gray 15"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 15,
    color: 'black',
    price: 45000,
    release_date: 2017,
    name: 'Macbook Pro Black 15"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 17,
    color: 'white',
    price: 65000,
    release_date: 2015,
    name: 'Macbook Air White 17"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 17,
    color: 'gray',
    price: 75000,
    release_date: 2016,
    name: 'Macbook Pro Gray 17"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
  {
    size: 17,
    color: 'black',
    price: 80000,
    release_date: 2017,
    name: 'Macbook Pro Black 17"',
    img: 'http://demo.posthemes.com/pos_zadademo/images/placeholder.png',
    descr:
      'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat, beatae.',
  },
];


const filter = { 
  size: [], 
  color: [], 
  release_date: [] 
};

const form = document.querySelector('.js-form');
form.addEventListener('submit', setFilter);

function setFilter(e) {
  e.preventDefault();
  const inputs = [...form.querySelectorAll('input')];
  
  // create template
  const card = document.querySelector('#card').innerHTML.trim();
  const productList = document.querySelector('.products');
  const template = Handlebars.compile(card);

  // clear list
  [...productList.children].forEach(el => el.remove());

  // clear filter object
  for(let prop in filter) {
    filter[prop].length = 0;
  }

  // add filter
  const newFilter = inputs.filter(el => el.checked);
  newFilter.forEach(el => filter[el.name].push(el.value));

  // selection of goods by filter
  const goodsByFilter = [];

  for(let obj of laptops) {
    for(let el of newFilter) {
      for(let prop in filter) {
        for(let item of filter[prop]) {
          if(goodsByFilter.includes(obj)) continue;
          
          if(el.name === 'color') {
            if(obj[el.name] === item) {
              goodsByFilter.push(obj);
            }
          } else if(obj[el.name] === Number(item)) {
            goodsByFilter.push(obj);
          } else continue;
        }
      }      
    }
  }

  // render
  const markup = template(goodsByFilter);
  productList.insertAdjacentHTML('beforeend', markup);
}

  
